# BitMap 算法

## 1.什么是
`BitMap`是用一个`bit`位标记某个元素的`value`（某种状态），而对应的`key`即为该元素。

### 主要用途
由于采用`bit`为单位存储数据，因此可以大大节省内存空间。

适用于大规模数据，但是数据状态又不是很多的情况。通常用来判断某个数据是否存在。也可以用来对大量数据进行去重操作。

## 2.bitMap算法基础

通常用于判断某数据是否存在，或对一些无重复数据进行查找。通常需要解决的问题有以下几个：
1. 用多少个 byte 表示所有要查找的数据或排序数据，转换为问题：需要多少长度的`int`数组或其他类型数组
2. 将实际数据如何转换为某个 bit 位
3. 将 bit 位如何转换为实际数

### 2.1确定表示数据的数组
以 Java int 作为存储单位则，需要数组长度：N/32 + 1

### 2.2将数据转为 bit位
- 数组下标：N/32
- 对应bit位：N%32
- 移位0-31使得对应的 bit 位为 1

### 2.3将 bit 位转换为数据
假设转换 bit 数组后，某个数组单元为： `0b 001001`，将该单元分别与 6 个数：`000001 000010 000100 001000 010000 100000`进行`&`运算，假设与`000001`运算，则结果为非 0 ，证明`1`位置有数据，即可得到`bit`位在该单元的下标，加上数组下标×每个数组单元bit长度，则可以计算出`bit`位所对应的数据

## 3.关于bitMap与权限管理

权限管理 顾名思义，判断是否具有某个权限。抽象理解为：判断**某个数据**是否**存在**。放入到 BitMap 算法中，即使用`BitMap`算法查找某个数据是否存在。

大体流程如下：
1. 获取到所有权限，并转换为对应的 BitMap 数组
2. 判断某个权限是否存在，即在 BitMap 数组中查找给定的数据是否存在即可。

### 3.1关键问题

#### 获取到所有权限
权限的具体表现形式？如一一个十六进制长字符串表示等等（ABCDEA）

#### 判断某个权限是否存在
如假设写权限为`0x1`，那么开发者判断是否有权限必然使用字面量来判断，如`write`，这就意味着需要使用类似这样的映射关系：   
```json
{
    "write": 0b1,
    "read": 0b10,
    "update": 0b100
}
```

### 3.2 流程
根据以上两个问题，前端具体的流程可以这样做：
1. 登录时获取到用户的所有权限
2. 登录时获取到权限判断的映射关系，约定好具体的字面量
3. 具体控制权限时，使用映射关系进行判断
