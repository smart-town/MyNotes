# 创建类的原因

如果你完全相信所读到的内容，你可能会得到这样一个概念，即认为创建类的唯一理由就是要为现实世界中的物理建模。而实际上，创建类的理由远远不止这一个，以下列出一些创建类的合理原因


## 为现实世界中的对象建模

为现实世界中的对象建模也许不是创建类的唯一理由，但是它仍然是一个很好的理由！请为你程序中需要建模的每一个出现在现实世界中的对象类型创建一个类。将该对象所需要的数据添加到类里面，然后编写一些服务子程序来为对象的行为建模

## 为抽象的对象建模

创建类的另一个合理原因是要建立抽象对象的模型。所谓的抽象对象并不是一个现实世界中的具体对象，但是它却能为另外一些具体的对象提供一种抽象。经典的`Shape`对象就是一个很好的例子。`Circle`和`Square`都是真实存在的，但是`Shape`是对其他具体形状的一种抽象

在程序设计中，抽象并不是像`Shape`一样现成就有的，因此我们必须努力工作以得出一些清晰的抽象。“从现实世界的实体中提炼出抽象的概念”这一过程是不确定的，不同的设计者会抽象出不同的共性来。举例来说，加入我们并不了解诸如圆、正方形这样的几何形状，就可能得出一些更不寻常的形状，如南瓜的形状等，得出恰当的抽象对象是面向对象设计中的一项主要挑战。

## 降低复杂度

创建类的一个最重要的理由就是降低程序的复杂度。创建一个类来把信息隐藏起来，这样你就无须再去考虑它们。当然，当你写到这个类的时候还是要考虑到这些信息的。但是类写好之后，你就应该能够忘掉这些细节，并能够在无需了解其内部工作原理的情况下使用这个类。其他那些创建类的原因——缩减代码空间、提高可维护性等都是很好地，但是一旦失去了类的抽象能力，那么复杂的应用程序对于我们的智力而言将是无法管理的了。

## 隔离复杂度

无论复杂度表现为何种形态——复杂的算法、大型数据集、错综复杂的通信协议等，都容易引发错误。一旦错误发生，只要它还在类的局部而未扩散到整个程序中，找到它就会比较容易。修正错误时引发的改动不会影响到其他代码，因为只有一个类需要修改，不会碰到其他代码。如果你找到了一种更好的、更简单或更可靠的算法，而原有的算法已经用类隔离起来的话，就可以很容易地把它替换掉。在开发过程总，这样做可以让你更容易尝试多种设计方案，保留最好的一种方案。

## 隐藏实现细节

想把实现细节隐藏起来的这种愿望本身就是创建类的一个绝佳理由，无论实现细节是像访问数据库那样复杂，还是像决定用数值还是字符串来存储某个特定数据成员那般寻常。

## 限制变动的影响范围

将容易变动的部分隔离开来，这样就能把变动所带来的影响限制在一个或者少数几个类的范围内。把最容易变动的部分设计成最容易修改的。容易变动的部分有硬件依赖、输入输出、复杂数据类型、业务逻辑等。

## 隐藏全局数据

如果你需要用到全局数据，就可以将它的实现细节隐藏到某个类的接口背后。与直接使用全局数据相比，通过访问器子程序来操控全局数据有很多好处，你可以改变数据结构而无需修改程序本身。你可以监视对这些数据的访问。“使用访问器子程序”这条规则还会促使你思考有关数据是否应该是全局的，经常你会发现，“全局数据”原来只是对象的数据而已。

## 让参数传递更顺畅

如果你需要将一个参数再多个子程序之间传递，这有可能表明应该把这些子程序重构到一个类中。把这个参数当做对象数据来共享，实质上，让参数传递更顺畅不是目标，但是将大量数据导出传递是在暗示换一种类的组织方式可能会更好。

## 建立中心控制点

在一个地方用来控制一项任务是一个好主意，控制可以表现为很多形式。了解一张表中记录的数目是一种形式；对文件、数据库连接、打印机等的控制又是一种。用一个类来读写数据库则是集中控制的又一种形式。如果需要将数据库转换为平坦的文件或者内存数据，有关改动也只会影响一个类。

集中控制这一概念和信息隐藏有些相似，但是它具有独特的启发式功用。

## 让代码更易于重用

将代码放入精心分解(`well-factored`)的一组类中，比起把代码全部塞进某个更大的类里面，前者更容易在其他程序中重用。如果有一部分代码，它们只是在程序里的一个地方调用，只要它可以被理解为一个较大类的一部分，而且这部分代码可能会在其他程序中用到，就可以把它提出来形成一个单独的类。

美国 NASA 的软件工程实验室曾经研究了 10 个积极追求代码重用的项目，研究结果表明，无论采用面向对象的设计方法还是以功能为导向的设计方法，在最初的项目中都没能太多地重用之前项目中的代码，因为之前的项目尚未形成充分的代码基础。然而到了后来，以功能为导向进行设计的项目能够重用之前项目中约 35% 的代码，而使用面向对象方法的项目能够重用之前项目中超过 70% 的代码。如果提前规划一下就能够让你少写 70% 的代码，那当然就要这样做了。

值得注意的是，NASA 这种创建可重用的类的方法并未涉及“为重用而涉及”。

## 为程序族做计划

如果你预计到某个程序会被修改，你可以把预计要被改动的部分放到单独的类里。同其他部分隔离开来，这是一个好主意。之后你就可以只修改这个类或者用新的类代替它，而不会影响到程序的其余部分了。仔细考虑整个程序族的可能情况，而不单是考虑单一程序的可能情况，这又是一种用于预先应对各种变化的强有力的启发式方法。

## 将相关操作包装到一起

即便你无法隐藏信息、共享数据或者规划灵活性，你仍然可以将相关操作合理地分组，比如分为三角函数、统计函数、字符串处理子程序、位操作子程序以及图形子程序，等等。类是把相关操作组合在一起的一种方法。除此之外，根据你使用的编程语言的不同，你还可以使用包、命名空间或头文件等方法

## 实现某种特定的重构

很多特定的重构方法都会生成新的类，包括把一个类转换为两个、隐藏委托、去掉中间人以及引入扩展类等等。为了能更好的实现这里所描述的任何一个目标，这些都是产生各种新类的动机

## 应该避免的类 Classes to Avoid

尽管通常情况下类是有用的，但是你也可能遇到一些麻烦。以下是一些应该避免创建的类  
**避免创建万能类** 要避免创建什么都知道、什么都能干的万能类。如果一个类把功夫都花到`Get()`和`Set()`方法向其他类所要数据，也就是说要深入到其他类的工作中并告诉它们如何去做的话，请考虑是否应该把这些功能组织到那些类中去，而不是放到万能类中

**消除无关紧要的类** 如果一个类只包含数据但是不包含行为的话，应该问问自己，它真的是一个类吗？同时应该考虑将这个类降级，让他的数据成员称为一个或者多个其他类的属性

**避免使用动词命名的类** 只有行为而没有数据的类往往不是一个真正的类，请考虑把类似`DatabaseInitialization`或`StringBuilder`这样的类变成其他类的一个子程序。 `a === 2`