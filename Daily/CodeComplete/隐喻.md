# 隐喻

## 1. 隐喻重要性

重要的研发成果常常产自类比，通过把你不太理解的东西和一些你较为理解、且十分类似的东西做比较，你可以对这些不太理解的东西产生更深刻的理解。这种使用隐喻的方法叫做**建模**。

科学史中到处都可以看到借助隐喻而产生的新发现，如苯环的发现、气体的分子运动理论等。

总的来说，模型的威力就在于其生动性，能够让你把握整个概念，它隐隐暗示各种属性、关系以及需要补充查证的部分。不过有些时候，当隐喻的概念被过度引申时，模型也会误导人们（比如以太）

且对于同一事物，总会有多种隐喻，但是总有一些隐喻比其他一些更贴切。一个好的隐喻应该是简单的，它与另外一些相关的隐喻联系密切，且能够解释大部分实验证据以及其他已经观测到的现象。

科学发展的历史并不是一系列从“错误”的隐喻到“正确”的隐喻的转变，而是一系列从“不太合适”的隐喻到“更好”的隐喻的转笔哦按，也是从不是很贴切的隐喻到更贴切的隐喻的转变，还是从在一个方面暗示人们到在另一个方面暗示人们的转变。

## 2. 软件隐喻

软件隐喻更像是一盏探照灯，它不会告诉你到哪里寻找答案，而是告诉你如何去寻找答案。隐喻的作用更像是**启示**，而不是**算法**

算法是一套定义明确的指令，使得你能够完成某个特定的任务。而启发式方法是一种帮你寻求答案的技术，但是它给出的答案具有偶然性，它仅仅告诉你该如何去找，而没有告诉你找到什么。

如果有一些能够明确指导你该如何解决编程问题的信息，编程当然会更容易，结果也更易预见。但是编程这门学科还没有那么先进，或许永远也不会那么先进。对于编程来说，**最大的挑战还是将问题概念化**，编程中的很多错误都是概念性的错误，正是因为每一个问题在概念上都是独特的，所以要找到一套能够解决所有问题的一通百通的指导规则是很难的、甚至是不太可能的。如此看来，能够一般性地知道大致如何解决问题，至少也和知道如何解决特定问题一样有价值了。

那么如何使用软件中的隐喻呢？应该用它来提高你对编程问题和编程过程的洞察力；用它来帮助你思考编程过程中的活动，想象出更好的做事情的方法。

## 3. 常见的软件隐喻

### 3.1 写作代码

关于软件开发最原始的隐喻就是从”写作代码“这个说法发展而来的，其暗示着开发一个程序就像写一封有缘由的信一样——坐下来，拿出来文房四宝，从头写到尾就完了。这时候不需要正规地计划，你想到什么把它写出来就完了。

### 3.2  培植系统 Growing a System

一次设计系统的一小部分、写出一段代码、做一点测试，并将成果一点点添加到整个系统中。通过这种小步前进，你可以把每次可能遇到的麻烦减到最小

### 3.3 系统生长 System Accretion

如何一次为系统增加一个小部分。更”生长“密切相关的另一些词语有: “增量的”、“迭代的”、“自适应的”、“演进的”。以增量的方式进行设计、编译、测试，都是目前已知的最有力的软件开发概念。

进行增量式开发时，最先做出软件系统一个尽可能简单、但是能够运行的版本。它不必接受真实的输入，也无需对数据进行真正的处理，更不用产生真实的输出——它仅仅需要构成一个足够强壮的骨架，支撑起来未来将要开发的真实系统。对于你标识出的每一项基本功能，可能仅仅需要调用虚假的类 dummy classes。这个最基本的起点，就像牡蛎开始孕育珍珠的那颗细小沙粒。

骨架形成之后，你要一点点在其上附着肌肉和皮肤：把每个虚假的类替换为真正的类：不再假装接收输入而是将真实接收输入的代码替换进去。你一次增加一小部分代码，直到可以得到一个完全可以工作的系统。

作为一个隐喻而言，增量式开发的优势在于未作出过度的承诺。

### 3.4 建造软件

与“写作”或“培育”软件而言，“建造”软件的图景就更加有用了。它和软件生长的概念是相通的，且提供了更详细的指引。建造软件这一说法暗示了软件开发中存在着诸多阶段，如计划、准备以及执行等。根据所建造软件的不同，这些阶段的种类和程度可能会发生变化。

要搭一座四足的塔，你要有一双稳健的手，要找一个平坦的表面，以及十来个完好无损的啤酒罐，但是要搭建一座比他大100倍的塔，光是100倍的啤酒罐还不够，还需要同时采用完全不同的计划方法和建造方法才行。

如果你要盖一个简单的简单的建筑物——比如一个狗屋——你先开车到木材店买一些木头和钉子，临近傍晚十分，你的爱犬就有新窝了。如果你忘记弄了一个门，或者犯了其他错误，那也没什么大不了的，修改一下或者干脆从头再来就是了，你的损失最多也就是一个下午的时间，这种宽松的方式对于小型项目来说也算合适，如果你写 1000 行代码采用了错误的设计，你还可以重构甚至从头再来，不会损失太多。

如果你是在建造一栋房子，那么这个建造过程就复杂很多。而糟糕的设计所引发的后果也更严重。首先你要决定准备建造一个什么类型的房子——在软件开发中类似的事项称之为**问题定义**。接下来，你必须和某个建筑师探讨这一总体设计，并得到批准，这和**软件架构设计**十分相似，然后你画出详细的蓝图，雇一个承包人，就像是软件的**详细设计**，再然后，你要准备好建造地点、打好地基、搭建房屋框架、砌好边墙、盖好房顶、通好电、水、煤气等。这就如同是软件的**构建**。在房子大部分完成之后，庭院设计是、油漆工、装修工还要将你的新家美化一番，这就好比软件的**优化**。在这一过程中，还会有各种监察人员检查工地、地基、框架等，这相当于**软件评审**和**详查**

在这两种活动中，更高的复杂度和更大的规模都会带来更多的结论。盖房子的时候，建材多少也有一些昂贵，但是主要的开销还是在人力上，将一堵墙推倒然后移动半尺是很昂贵的，倒不在于浪费多少钉子，而是因为你要付给工人们更多的工钱，移动这堵墙耗费了额外的工时，你只有尽可能把房子设计好、这样你才不用浪费时间去修正那些本来可以避免的错误。在开发一个软件产品时，原材料甚至更廉价，但是劳动力上的开销更加昂贵，变更一份报表格式所要付出的代价，和移动房间里一堵墙一样昂贵，因为两者的主要成本构成部分都是花费人的时间。

除此之外，这两种活动还有什么相似之处呢？建造一个房子的时候，你不会试着去建造那些能够买得到的现成的东西。你会买洗衣机、电冰箱等。除非你是机电方面的专家，否则你是不会考虑自己动手弄这些东西的。你还会购买预先造好的橱柜、门窗等等。当开发软件时，你也会这样做的，你会大量使用高级语言所提供的功能，而不会自己去编写操作系统层次的代码。你可能还要用些现成的程序库，比如说一些容器类、科学计算函数、用户界面组件等等。总之，自己编写那些能够买得到的现成的代码通常是没有意义的。

但是如果你要建造一间拥有一流家具的高档住宅，那么你可能需要特别订制的家具。软件开发中也有和这种订制类似的情况，如果你要开发一款一流的软件产品，你可能会自己编写科学计算函数、还可能需要自己编写容器类、用户界面组件、数据库访问组件等等。这样可以让产品的各个部分无缝拼接，拥有一致的外观和体验。

**适当的多层次规划对于建造建筑物和构造软件都有好处。如果你按照错误的顺序构建软件，那么编码、测试、调试都会更困难。需要花更长的时间才能完成。甚至整个项目就干脆分崩离析了——由于每个人的工作都过于复杂，所有成果组合在一起就变得混乱不堪了。**

精心计划、并非意味着事无巨细的计划或者过度的计划，你可将房屋结构性的支撑规划清楚，而在日后决定用木地板还是地毯，墙面漆成什么颜色等。**一项规划得当的项目能够提升你“在后期改变细节（设计）”的能力。** 你对于同类软件的开发经验越丰富，在开发新软件时就能认准更多的细节，你只需要保证已经做了足够的计划，不会到后来因为计划上的不足而引发重大问题。

用建筑房屋来类比软件构建，还有助于解释为什么不同的软件项目能从不同的开发方法中获益。建筑业中，盖间仓库或者工具房，或者是一座医院或者核反应站，你在规划、设计、质量保证方面所需达到的程度也是不一样的。盖一座学校、一幢摩天大楼，或者一座三居室的小别墅，所用的方法也不会相同。同理，在软件开发中，通常你只需要用灵活的、轻量级的方法，但是有时候你就必须得用严格的、重量级的开发方法，以达到所需的安全性目标或者其他什么目标。

软件的变动在建筑领域也有类似事物，将一堵承重墙移动半尺所需要花费的成本，肯定要比仅仅移动一面隔墙更高。同样，对于软件进行结构性的修改所需花费的成本，肯定也比仅仅增删一些周边功能更高。

最后，建筑这一隐喻让人们对于超大型的软件项目的认识更加深刻。超大型的结构一旦出现问题，后果将非常严重。因此有必要对这样的结果进行超出常规的规划和建设，建筑人员需要非常小心地制定并核查设计规划，在建设时留有余地以保障安全；宁可花 10% 的成本买更坚固的材料，也比摩天大楼倒下来要划算得多，还需要特别关注工作的时间。在建造帝国大厦的时候，每辆运料车运输时都留有 15 分钟的余地，如果某辆车没有在指定时间到位，那么整个工期都会延误。

如果需要创造在经济规模上可以匹敌帝国大厦的庞大的软件项目，那么与之相当水准的技术和管理控制也是必须的。


按照房屋建筑这一隐喻，可以向许多方向引申——这也是隐喻这一方法如此强有力的一个原因。有很多常见的软件开发术语都是从建筑这一隐喻衍生出来的：软件架构、支撑性测试代码、构建、基础类、分离代码等等。

## 4. 智慧工具箱

能够有效地开发高质量软件的人们在长年累月中积累了大量的技术、技巧和诀窍。技术并不是规矩、它只是分析工具。好的工匠知道完成某项工作需要用哪样工具，也知道该怎样正确地使用。程序员也该这样，编程方面的知识学得越多，你脑中的工具箱就会有越多的分析工具，也会知道该在何时使用这些工具，以及怎样正确地使用它们。

在软件领域中，专业的资讯人员有时候会让你专用某种软件开发方法而原理其他方法，这并不妥当，因为当你百分之百依赖某一种方法论的时候，你就只会用一种方法去看世界了。某些情况下对于你面临的问题还有其他更好的方法，你可能错失良机。这种**工具箱隐喻**能够帮助你把所有的方法、技巧以及技术留在脑海中——合适的时候即可拿来使用。

## 5. 组合各个隐喻

因为隐喻是一种启发式方法而不是算法，因此它们并不排斥，你可以同时使用生长和建筑两个隐喻，也可以用写作隐喻，等等。你可以选用任何一种隐喻或者一些隐喻的组合，只要它能激发你的思维灵感，并让你和团队其他成员更好地沟通。

**使用隐喻又是一件说不清楚的事情，你需要适当地引申它的含义，才能够从其蕴含的深刻启发中受益。但是如果你过分地或者在错误的方向上引申了它的含义，它也会误导你。正如人们会误用任何强大的工具一样，你也可能误用隐喻，但是它强大的功效，还是会成为你智慧工具箱中的一个宝贵部分。**