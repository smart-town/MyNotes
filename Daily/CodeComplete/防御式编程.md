# 防御式编程
1. 保护程序免遭非法输入数据的破坏
2. 断言
3. 错误处理技术
4. 异常
5. 隔离程序，使之包容由错误造成的损害
6. 辅助调试的代码
7. 确定在产品代码中应该保留多少防御式代码
8. 对防御式编程采取防御的态度

防御式编程，概念来自于“防御式驾驶”，你永远也不能确定另外一个司机将要做什么。这样才能确保别人做出危险时你也不会受到伤害。你要承担起保护自己的责任，哪怕是其他司机犯的错误。防御式编程是说：子程序应该不因为传入错误数据而被破坏，哪怕是由其他子程序产生的错误数据。

## 保护程序免遭非法输入数据的破坏
1. 检查所有来源于外部的数据的值
2. 检查子程序所有输入参数的值
3. 决定如何处理错误的输入数据

## 断言
**断言**指的是开发期间使用的、让程序在运行时自检的代码。为真则表示程序正常，为假则意味着在代码中发现了预料之外的错误。
1. 用错误处理代码来处理预期会发生的情况，用断言来处理绝不应该发生的状况
2. 避免把需要执行的代码放到断言中

## 错误处理技术
1. 返回中立值
2. 换用下一个正确的数据
3. 返回与前次相同的数据
4. 换用最接近的值 *上面四点可以从当前拥有变量的个数来决定，比如只有一个，那么就给最接近或者返回中立或者上次数据，有很多很多那么就可以换用下一个*
5. 将警告信息记录到日志文件中
6. 返回一个错误码
7. 调用错误处理子程序或对象
8. 错误发生时显示错误信息
9. 关闭程序

## 异常
1. 用异常通知程序其他部分发生了不可忽略的错误
2. 只在真正例外的情况下才抛出异常
3. 不能用异常来推卸责任（应该在局部处理就在局部处理）
4. 在恰当的抽象层次上抛出异常
5. 在异常消息中加入关于导致异常的全部消息
6. 避免使用空的`catch`语句
7. 考虑异常的替换方案

## 隔离程序
将某些接口选定为“安全”区域的边界，对穿越安全区域的数据进行合法性校验，并当数据非法时做出敏锐的反映。也同样可以在类的层次使用这种方法，类的公用方法可以假设数据是不安全的，它们要负责检查数据并清理，一旦类的公有方法接受了数据，那么类的私有数据就可以假定数据是安全的了。**让软件的某些部分处理“不干净的”数据，另一些部分处理“干净的”数据，即可让大部分代码无需再负担检查错误数据的职责。

## 辅助调试的代码
1. 不要自动将产品版的限制强加在开发版上
2. 尽早引入辅助调试的代码
3. 采用进攻式编程（处理异常：开发阶段让它显现出来，而在产品代码运行时让它能自动恢复）
4. 计划移除调试辅助的代码：使用类似`ant`和`make`这样的工具，使用内置的预处理器