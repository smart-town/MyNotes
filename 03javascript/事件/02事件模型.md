# 事件模型

浏览器的事件模型，就是通过监听函数对事件作出反应。事件发生后，浏览器监听到了这个事件，就会执行对应的函数，这是**事件驱动编程模式**的主要编程方式。

JavaScript 有三种方法可以为事件绑定监听函数。

## 监听函数

1. `on-`属性

HTML 允许在元素的属性中，直接定义某些事件的监听代码。如`onload`等。元素的事件监听属性都是`on`加上事件名。

【注意】这些属性的值是将会执行的代码，而不是一个函数。一旦指定的事件发生，`on-`属性的值是原样传入 JavaScript 引擎执行，因此如果要执行函数一定要加上圆括号。

使用这种方式指定的监听代码，**只会在冒泡阶段触发**。

2. 元素节点的事件属性

元素节点的事件属性同样可以指定监听函数。使用这种方式指定的监听函数，**同样也是只会在冒泡阶段触发**
https://github.com/dipakkr/A-to-Z-Resources-for-Students.git
【注意】这种方法与 HTML 的`on-`属性差异是，它的值是函数名，而不像后者一样要给出完整的监听代码。

3. `EventTarget.addEventListener()`

所有 DOM 节点实例都有`addEventListener`方法，用来定义该节点事件的监听函数。

4. 小结

- HTML 的`on-`属性将 HTML 和 js 代码混合在一起，不推荐使用
- 元素节点事件属性缺点在于同一个事件只能定义一个监听函数，不推荐使用
- `addEventListener()`是推荐用法，其可以为同一个事件添加多个监听函数，能够指定在哪个阶段触发。

## this 指向

**监听函数内部的`this`指向触发事件的那个元素节点**。

## 事件传播

一个事件发生之后，会在子元素和父元素之间传播，这种传播分为三个阶段：
- **第一阶段**：从`window`对象传导到目标节点（上层传递到底层），称为**捕获阶段** capture phase
- **第二阶段**：在目标节点上触发，称为**目标阶段**
- **第三阶段**：从目标阶段传导回`window`对象，称为**冒泡阶段**

这三个阶段的传播模型，使得同一个事件会在多个节点上触发。

【注意】浏览器总是假定`click`事件的目标节点就是点击位置嵌套最深的那个节点。

事件传播的最上层对象是`window`，接着依次是`document`、`html`、`body`。

## 事件的代理

由于事件会在冒泡阶段向上传播到父节点，因此可以将子节点的监听函数定义在父节点上，由父节点的监听函数统一处理多个子元素的事件，这种方法叫做事件的代理。

