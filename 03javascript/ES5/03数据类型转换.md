# 数据类型转换

## 概述

js 是动态类型语言，变量类型没有限制，可以随时赋予任意值。

虽然变量的类型是不确定的，但是各种运算符对数据类型还是有要求的。如果运算符发现，运算子的类型与预期不符，就会自动转换数据类型。

## 强制转换数据类型

指使用`Number()`、`String()`和`Boolean()`手动将各种类型的值分别转换成数字、字符串或布尔值。

### Number

#### 转换原始类型值

`Number`将字符串转换为数值，要比`parseInt`要严格很多，基本上只要有一个字符无法转换成数值，整个字符串就会被转为`NaN`

#### 转换对象

Number 转换对象时，将返回`NaN`除非是包含单个数值的数组。

规则：1.对象的`valueOf`方法 2. 对象的`toString`方法 3. 如果`toString`返回值还是对象就报错

### String

#### 原始类型值

#### 对象

`String`方法的参数如果是对象，返回一个类型字符串；如果是数组，将返回该数组的字符串形式

规则：
1. 调用对象的`toString`方法，如果返回值是原始类型则对该值使用`toString`
2. 如果`toString`返回的是对象，则调用原对象的`valueOf`方法，如果返回的是原始值则调用`toString`
3. 如果`valueOf`返回对象则报错

### Boolean

将以下值转换为`false`，其他值均为`true`:
- `undefined`
- `null`
- `0`
- `NaN`
- `''`（空字符串）

**注意**所有的对象（包括空对象）转换结果都是`true`，甚至连`new Boolean(false)`也是`true`

## 自动转换

自动转换是以强制转换为基础的。遇到以下三种情况时，js 会自动转换数据类型：
- 不同类型数据互相运算
- 对非布尔值类型数据求布尔值
- 对非数值类型使用`+`和`-`，如`+{foo:'ba'}`（`NaN`）

自动转换的规则：预期什么类型的值，就调用该类型的转换函数。如预期某个位置为字符串则调用`String`函数转换。

由于自动转换具有不确定性，而且不易除错，建议在预期为布尔值、数值、字符串的地方都使用强制转换。