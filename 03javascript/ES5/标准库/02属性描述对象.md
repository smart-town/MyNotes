# 属性描述对象

## 1.概述

js 提供了一个内部数据结构，用来描述对象的属性，控制它的行为。比如该属性是否可写、可遍历等。这个内部数据结构称为**属性描述对象**(attributes obejct)。每个属性都有自己对应的属性描述对象，保存该属性的一些元信息。

属性描述对象提供 6 个属性
- `value`: 该属性的属性值，默认`undefined`
- `writable`: 布尔值，表示属性值是否可写，默认为`true`
- `enumerable`: 布尔值，表示属性值是否可遍历。默认`true`，如果为`false`则会使得某些操作如`for...in`循环跳过该属性
- `configurable`: 布尔值，表示可配置性，默认为`true`，如果为`false`将阻止某些操作改写属性，比如无法删除属性，也不得改变该属性的描述对象`value`属性除外。也就是说该属性控制了**属性描述对象**的可写性。
- `get` 一个函数，表示该属性的取值函数，默认`undefined`
- `set` 一个函数，存值函数

## 2. 相关方法

### Object.getOwnPropertyDescriptor()

可以获取属性描述对象，第一个参数是目标对象，第二个参数是一个字符串，对应目标对象的某个属性名。注意该方法只能用于对象自身的属性。

### Object.getOwnPropertyNames()

该方法一个数组，成员是参数对象自身的全部属性，无论该属性是否可遍历。注意与`Object.keys()`的区别

### Object.defineProperty(),defineProperties()

`Object.defineProperty()`允许通过属性描述对象，定义或修改一个属性，然后返回修改后的对象：
```js
Object.defineProperty(object,propertyName,attributesObject)
```

如果一次定义或修改多个属性，使用`defineProperties`方法：
```js
var obj = Object.defineProperties({},{
    p1: {value:123, }
})
```

【注意】一旦定义了取值函数的`get`或`set`就不能将`writable`属性设置为`true`，或者同时定义`value`属性，否则会报错。

### Object.prototype.propertyIsEnumerable()

该方法返回一个布尔值，用来判断某个属性是否可遍历。注意该方法只能判断对象自身的属性，对于继承的属性一律返回`false`

## 3. 元属性

属性描述对象的各个属性

### value
目标属性的值
### writable
决定目标属性是否可以被改变，正常模式下对`writable`为`false`的值赋值只会默默失败，严格模式下会报错。规避方法则是通过覆盖属性描述对象来绕过限制
### enumerable
返回一个值决定目标属性是否可以遍历。具体来说，如果一个属性`enumerable`为`false`，则下面操作不会取到该值：
- `for...in`
- `Object.keys()`
- `JSON.stringify()`
因此，`enumerable`可以用来设置秘密属性。
### configurable

// TODO 继续...