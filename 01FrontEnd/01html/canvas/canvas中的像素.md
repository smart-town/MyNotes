# canvas 中的像素

[原文](https://blog.csdn.net/AiHuanhuan110/article/details/109471948)

canvas 有两种`width, height`:

- `width,height` 属性：一般称为**画布尺寸**，即图形默认绘制的地方
- css 样式中的`width,height`: 称为**画板尺寸**，用于渲染绘制完成的图形，默认为空

如果设置了画布尺寸，未设置画板尺寸，或者两者均未设置，那么画板尺寸随着画布尺寸改变。    
但是如果设置了画板尺寸，而未设置画布尺寸，或者分别设置了，那么画板尺寸不再随着画布尺寸改变。    
如果两者设置的尺寸不一样时，就会导致一个问题，渲染时画布要通过缩放来使其与画板一样，那么画布上的已经绘制好的图形也会随之缩放，随之导致变形失真。

为了避免发生这种情况，需要保持画布和画板尺寸一致。

### 关于两种宽高之间的影响

**canvas 元素的大小（宽高）会影响 canvas 画布的内容**。简单来说，`canvas`画布会随着画板进行缩放。

举例：画一个半径为 50 的圆，画布默认 `300 * 150`, 不设置 canvas 元素宽高的情况下是一个圆；如果设置 canvas 宽高都为 150，那么画布 x 轴方向会被压缩，变为原来的 1/2。

解决思路由此而来：将 canvas 画布大小乘以 设备宽高比转换为实际的像素（物理像素）大小，然后通过 css 设置 canvas 元素的大小为逻辑像素 100px，缩放之后，画布的内容就是高清的了，但是这个时候画布内容是缩小的，这时候使用 canvas 的`scale()`进行缩放就可以了。

## 关于高清屏上清晰显示 canvas

对于高清屏幕，其`devicePixelRatio`大于 1，canvas 绘制的图形是**位图**，即**栅格图像**或**点阵图像**，当将他渲染到高清屏上时，会被放大，每个像素点会用`devicePixelRatio`的平方个物理像素来渲染，因此图片变得模糊。

解决方式：将画布尺寸设置为画板尺寸的`window.devicePixelRatio`倍。绘制图形时使用`scale`进行缩放后再绘制`ctx.scale(window.devicePixelRatio, window.devicePixelRatio)`

**注意**：画板尺寸应该设置为你想要的尺寸。
