# 绘制图形

设置了`canvas`环境之后，就可以了解如何在`canvas`上绘制。这里介绍如何绘制矩形、三角形、直线、圆弧和曲线。

## 栅格

开始画图之前，需要了解画布栅格(canvas grid)以及坐标空间。`canvas`元素默认被网格覆盖，通常来说网格中的一个单元相当于`canvas`元素中的一个像素，栅格的起点为左上角，坐标(0,0)。所有的元素的位置都相对于原点定位。

## 矩形

不同于`svg`，`canvas`只支持两种形式的图形绘制：**矩形**和**路径**（由一系列点连成的线段），所有其他类型的图形都是通过一条或者多条路径组合而成的。不过，通过众多路径的生成方法让复杂图形的绘制成为了可能。

关于矩形，`canvas`提供了三种绘制方法：
- `fillRect(x, y, width, height)`：绘制一个填充的矩形
- `strokeRect(x, y, width, height)`: 绘制一个矩形的边框
- `clearRect(x, y, width, height)`: 清除指定区域，让清除部分完全透明

## 绘制路径

图形的基本元素是路径，路径是通过不同颜色和宽度的线段或曲线相连形成的不同形状的点的集合。一个路径甚至一个子路径，都是闭合的。 使用路径绘制图形需要一些额外的步骤：

1. 创建路径起始点
2. 使用画图命令画出路径
3. 将路径封闭
4. 一旦路径生成，就可以描边或填充路径区域来渲染图形

以下是需要用到的函数：
- `beginPath()`: 新建一条路径，生成后，图形绘制命令被指向到路径上生成路径
- `closePath()`: 闭合路径之后图形绘制命令又重新指向到上下文中（不是必须的，该方法会通过绘制一条从当前点到开始点的直线来闭合图，如果图形已经闭合，即当前点为开始点，该函数什么也不做）
- `stroke()`: 通过线条绘制图形轮廓
- `fill()`: 填充内容区域

**注意**，当前路径为空，即调用`beginPath()`或`canvas`刚创建时，第一条路径构造命令通常视为`moveTo()`，无论实际是什么，出于这个原因，你几乎总是需要在设置路径后专门指定你的起始位置。

### 移动笔触

一个非常有用的函数，其实际上并不能画出任何东西，`moveTo(x,y)`，将笔触移动到指定的坐标上。当`canvas`初始化或`beginPath()`调用后，通常使用该函数设置起点，我们也能利用`moveTo`绘制一些不连续的路径。

### 线

绘制直线：`lineTo(x,y)`

### 圆弧

- `arc(x, y, radius, startAngle, endAngle, anticlockwise)`： 画一个以`x,y`为圆心的以`radius`为半径的圆弧（圆），从`startAngle`到`endAngle`结束。按照给定的`anticlockwise`方向生成（默认为顺时针）
- `arcTo(x1, y1, x2, y2, radius)`: 根据给定的控制点绘制一段圆弧，再以直线链接两个点。

### 二次贝塞尔曲线及三次贝塞尔曲线

另一个十分有用的曲线就是**贝塞尔曲线**，一般用来绘制复杂有规律的图形。

- `quadraticCurveTo(cp1x, cp1y, x, y)`: 二次贝塞尔曲线，`cp1x, cp1y`为一个控制点，`x,y`为结束点
- `bezierCurveTo(cp1x, cp2y, cp2x, cp2y, x, y)`：三次贝塞尔曲线。