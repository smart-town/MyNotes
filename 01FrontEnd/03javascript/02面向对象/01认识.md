# MDN 中关于面向对象

最基本的 OOP 思想就是我们在程序中使用对象来表示现实世界模型，并提供一个简单的方式来访问它的功能。

对象可以包含相关数据和代码。这些代表现实世界模型的一些信息或功能，或者它特有的一些行为。对象数据（也常称为函数）可以有结构地存储（**封装**）在对象包中，使它容易被访问和组织。对象也常用于存储数据，这样可以很容易地在网络上传输。

## 定义一个对象模板

考虑一个简单的程序，可以显示一个学校的学生和老师的信息。这里不讨论任何程序语言，只讨论OOP思想。

首先，对于一个人来说，我们能从他身上获取到很多信息（住址、身高、鞋码、性格特征等等），然而，我们仅仅需要他的名字，年龄，性别，兴趣这些信息。然后我们会基于这些信息写一个简短的介绍关于他自己，在最后我们还需要教会他打招呼。以上的方式被称为**抽象——为了我们编程的目标而利用事物的重要特征去把复杂的事物简单化**。

在一些面向对象的语言中，我们使用`class`类的概念去描述一个对象，（下面就能看到JS使用了一个完全不同的术语）,类并不完全是一个对象，**它更像是一个定义对象特质的模板**。

## 创造一个真正的对象

当一个对象实例需要从类中创建出来时，类的构造函数就会运行来创建这个实例。这种创建对象实例的过程我们称之为实例化。**实例对象被类实例化**。

## 具体的对象

在以上的例子中，我们不是想要泛指的人，而是想要更为具体的，老师和学生这样的人。在OOP中，我们可以创建基于其他类的新类，这些新的子类可以继承它们父类的数据和功能。比起复制来说这样能够使用父对象共有的功能。这是非常有用的，老师和学生具有一些相同的特征比如姓名、性别、年龄，因此只需要定义这些特征一次就够了。你可以在不同的类里分开定义这些相同的特征。这样该特征就会有一个不同的命名空间。

【多态】:描述多个对象拥有实现共同方法的能力。

## 构建函数和对象实例

有些人认为JavaScript不是真正的面向对象的语言，比如他没有像许多面向对象的语言一样有用于创建class类的声明。JavaScript用一种称为**构建函数**的特殊函数来定义对象和它们的特征。构建函数非常有用。因为很多情况下你不知道实际需要多少个对象（实例），**构建函数**提供了创建你所需对象的有效方法，将对象的数据和特征函数按需连接到相应的对象。

不像经典的面向对象语言，从构建函数创建的新实例的特征并非全盘复制，而是通过一个叫做**原型链**的参考链链接过去的。所以这并非真正的实例。严格来讲，JavaScript在对象间使用和其他语言的共享机制不一样。“经典”的面向对象的语言并非坏事，就像上面所说，OOP很快就会变得非常复杂。JavaScript找到了在不变的非常复杂的情况下，利用面向对象的优点的方法。

简单的例子：

通过一个普通的函数定义一个“人”

```javascript
function createNewPerson(name){
    var obj = {} ;
    obj.name = name ;
    obj.greeting = function(){
        alert("Hi! I'm " + this.name + ".") ;
    }
    return obj ;
}

//通过调用这个函数创建实例
var salva = createNewPerson('salva') ;
salva.name;
salva.greeting() ;
```

JavaScript版本的类——构建函数

```javascript
function Person(name){
    this.name = name ;
    this.greeting = function(){alert("Hi! I am " + this.name + ".");} ;
}
```
可以看到构建函数只定义了对象的属性和方法，除了没有明确创建一个对象和返回任何值之外，它有了上面函数中所使拥有的全部功能。这里使用的`this`关键字，即无论是该对象的哪个实例被这个构建函数创建，它的name属性就是传入的name值。

调用构建函数创建新的实例：

```javascript
var person1 = new Person("bob") ;
var person2 = new Person("Alice") ;
person1.name ;
person1.greeting() ;
person2.name ;
person2.greeting() ;
```

上述代码中，**关键字`new`跟着一个含参函数，用于告知浏览器我们要创建一个对象实例**。非常类似函数调用，并把结果保存到变量中。当新的对象被创立，变量`person1`和`person2`有效地包含了参数值，之所以说有效，是因为实际的方法仍然定义在类中，而不是在对象实例中。这与我们所说的字母意义上的对象还是有区别的。

## 最终的构造函数

上面的例子仅仅是简单的开始，这里开始创建`Person()`构造函数

```javascript
function Person(first, last, age, gender, interests){
    this.name = {
        first,
        last
    };
    this.age = age ;
    this.gender = gender;
    this.interests = interests ;

    this.bio = function(){alert(this.name.first + " " + this.name.last + " is " + this.age);};

    this.greeting = function(){alert("hi!I am " + this.name);} ;
};
```

创建对象实例
`var person = new Person("Bob","Smith",32,"male",['music','sking']);`

可以访问它的属性和方法了

## 创建对象实例的其他方式

到现在为止我们了解到两种不同创建对象实例的方式。**声明一个对象的语法**和**使用构造函数**。

这些方法都是很有用的，但是仍然有其他的方法，需要了解以免遇到。

### Object()构造函数

首先，使用`Object()`构造函数可以构造一个新对象。它创建了一个新的空对象

其次，就可以根据需要在空对象中向其添加属性或方法。还可以将对象文本传递给Object()作为参数

`var person1 = new Object({name:'chirs',age:38}) ;`

### create() 方法

JavaScript有一个内嵌的方法`create()`，允许你基于现有对象创建新的对象实例。

```js
var person2 = Object.create(person1) ;

person2.name ;
person2.greeting() ;
```

可以看到 person2 是基于 person1 来创建的。它们具有相同的属性和方法。这非常有用，它允许你创建新的对象而无需定义构造函数。缺点是比起构造函数，浏览器在更晚的时候才支持`create`方法。加上一些人认为构造函数能让代码看上去更整洁——你可以在一个地方创建你的构造函数，然后根据需要创建实例。

但是如果你不太担心对旧浏览器的支持，并且你只需要一个对象的一些副本，那么创建一个构造函数可能会让你的代码冗杂，这取决于你的个人爱好。



