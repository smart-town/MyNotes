# 函数式编程

## 定义

函数式编程是一种“编程范式”，也就是如何编写程序的方法论。

它属于结构化编程的一种，主要思想是把运算过程尽量写成一系列的嵌套的函数调用。如这样一个表达式：`(1 + 2) * 3 - 4`。传统的过程编程可能这样：

```js
var a = 1 + 2;
var b = a * 3;
var c = b - 4;
```

函数式编程要求使用函数，我们可以把运算过程定义为不同的函数：`var result  = substract(multiply(add(1,2),3),4);` 这就是函数式编程

## 特点

函数式编程具有五个鲜明特点：

### 函数是第一等公民

所谓第一等公民，指的是函数与其他数据类型一样，处于平等地位，可以赋值给其他变量，也可以作为参数传入另一个参数，或者作为别的函数的返回值。

### 只用表达式不用语句

”表达式“是一个单纯的运算过程，总是有返回值。”语句“是执行某种操作，没有返回值。函数式编程要求，只使用表达式不使用语句。也就是说每一步都是单纯的运算，而且都有返回值。原因是函数式编程的开发动机，一开始就是为了处理运算，不考虑系统的读写。语句属于对系统的读写操作，所以就被排除在外。

当然在实际应用中不使用 I/O 是不可能的，因此在编程过程中，函数式编程要求将I/O限制到最小。不要有不必要的读写行为。

### 没有副作用

所谓副作用指的是函数内部与外部互动，最典型的情况就是修改全局变量的值，产生运算以外的结果。函数式编程强调没有副作用，意味着函数要保持独立。所有功能就是返回一个新的值，没有其他行为，尤其是不得修改外部变量的值。

### 不修改状态

上面提到函数式编程只是返回新的值，不修改系统变量，因此，不修改变量也是它的一个重要特点。在其他类型的编程语言中，变量往往用来保存状态，不修改变量意味着状态不能保存在变量中。函数式编程使用参数保持状态，最好的例子就是递归。

### 引用透明

指的是函数的运行不依赖于外部变量或者状态，只依赖于输入的参数，任何时候只要参数相同，引用函数所能得到的返回值总是相同的。

## 意义

### 代码简洁，开发快速

函数式编程大量使用函数减少了代码的重复因此程序较短开发速度较快。

### 接近自然语言易于理解

函数式编程的自由度很高可以写出很接近自然语言的代码。正如上面的例子。可以变形为`add(1,2).multiply(3).substract(4)`。因此函数式编程的代码更容易理解。

### 更方便的代码管理

函数式编程不依赖于、也不会改变外界状态，只要给定输入参数返回的结果必然相同。因此每个函数都可以被看做是独立单元，很有利于进行单元测试、模块化组合

### 易于并发编程

函数式编程不需要考虑”死锁“，因为它不修改变量，所以根本不存在锁线程的问题。

### 代码热升级

函数式编程没有副作用，只要保证接口不变，内部实现与外部是无关的。所以可以在运行状态下升级代码，不需要重启也不需要停机。