# MDN 事件介绍

事件是编程时系统内发生的动作或者事情，系统通过它来告诉你，在你愿意的情况下可以以某种方式对它进行回应。*考虑*:js是一般情况下而言，是基于浏览器进行的编程，所以说，对于这些基于某些容器之上的编程来说，是否都会存在一个类似的机制。事件。

每一个可用的事件都会有一个事件处理器，也就是事件触发时会运行的代码块，当我们定义了一个用于回应事件被激发的代码块时，我们就说**注册了一个事件处理器**，它有时也被叫做**事件监听器**。

## 使用网页事件的方式

### 事件处理器属性

```javascript
var btn = document.querySelector('button') ;

btn.onclick = function(){...};
```

这里的`onclick`是被用在这个情景下的事件处理器的属性。

### 行内事件处理器

`<button onclick="bgChange()">Press</button>`

在 web 上注册事件处理程序的最早方法是类似于上面的**事件处理程序HTML属性**，也称为内联事件处理程序。属性值实际上是当事件发生时要运行的JavaScript代码。上面的例子中调用了一个在`<script>`元素中的函数，但是其实也可以直接在属性内插入JavaScript，如:`<button onclick="alert('Hello')">Press</button>`

你可能发现HTML属性等价于对许多事件处理程序的属性。但是你不应该使用这些，这被认为是不好的做法。使用一个事件处理属性可能看起来很简单，如果你只是做一些非常快的事情。但是很快就会变得难以管理和效率底下。

### addEventListener() 和 removeEventListener()

新的触发机制，`addEventListener()`，这个函数和事件处理属性是类似的但是语法略有不同。在该函数中我们具体化了两个参数——我们想要应用上去的事件名称，和包含我们用来回应事件的函数代码。对应的`removeEventListener()`可以移除事件监听器。可能在小型、简单的项目中不是很有用，但是在大型的、复杂的项目中就非常有用了，可以非常高效地清除不用的事件处理器。

**比较特别的一点**，关于给同一个监听器注册多个处理器

```javascript
myElement.onclick = functionA;
myElement.onclick = functionB;
//第二行会覆盖第一行，但是下面的方式就可以正常工作

myElement.addEventListener('click', functionA) ;
myElement.addEventListener('click', functionB) ;
```

## 其他事件概念

### 事件对象

有时候可能在事件处理函数内部，可能会看到一个固定指定名称的参数，例如`event`、`ev`，这被称为**事件对象**，它被自动传递给事件处理函数，以提供额外的功能和信息。

### 事件冒泡以及捕获

事件冒泡和捕捉是两种机制，主要描述当在一个元素上有两个相同类型事件处理器被激活时会发生什么。

当一个事件发生在具有父元素的元素上，现代浏览器运行两个不同的阶段——捕获阶段和冒泡阶段。在捕获阶段：

- 浏览器检查元素的最外层祖先`<html>`，是否在捕获阶段中注册一个`onclick`事件处理器程序，如果是，则运行
- 然后，它移动在`<html>`中的下一个元素，并执行相同的操作，然后是下一个元素，以此类推，直到到达实际点击的元素。

冒泡阶段则恰恰相反，

- 浏览器检查实际点击的元素是否在冒泡阶段注册了一个`onclick`事件处理程序，如果是，则运行它。
- 然后它移动到下一个直接的祖先元素，并做同样的事情，然后是下一个，直到它到达html元素

在现代浏览器中，**默认情况下**，所有事情处理程序都在冒泡阶段进行注册。如果你真的想在捕获阶段注册一个事件，那么可以通过使用 `addEventListener()`注册你的处理程序，并将可选的第三个属性设置为 `true`。

**stopPropagation()**修复问题

标准事件对象具有可用的名为`stopPropagation()`函数，当在事件对象上调用该函数时，它只会让当前事件处理程序运行，但是事件不会在冒泡链上进一步扩大。因此将不会有更多的事件处理器被运行。（不会向上冒泡）。

### 事件委托

冒泡允许我们利用**事件委托**——这个概念依赖于这样一个事实，如果你想要在大量子元素中单击任何一个事件都可以运行一段代码，你可以将事件监听器设置在父结点上，并将事件监听器气泡的影响设置为每个节点，而不是每个子节点单独设置事件监听器。