# 像素

CSS 像素、物理像素、逻辑像素、设备像素比、PPI、Viewport

## 1. CSS pixels

**虚拟像素**，可以理解为“直觉”像素，CSS 和 JS 使用这种抽象单位，浏览器内的一切长度都是以 CSS 像素为单位的。

在 CSS 规范中，长度单位可以分为两类：**绝对单位**和**相对单位**，px 是一个相对单位，相对的是设备像素(device pixel)

在同样一个设备上，每 1 个 CSS 像素所代表的物理像素是可以变化的，即 css 的第一方面的相对性。

在不同设备之间，每 1 个 CSS 像素所代表的物理像素是可以变化的，即 css 第二方面的相对性。

### px 理解

`px`实际是`pixel`的缩写，是图像显示的基本单元，**既不是一个确定的物理量，也不是一个点或者小方块，而是一个抽象概念**。所以在谈论像素时一定要清楚**上下文**。

不同的设备，图像基本采样单元是不同的，显示器上的物理像素等于显示器的点距，而打印机的物理像素等于打印机的墨点，而衡量点距大小和打印机墨点大小的单位分别是 ppi 和 dpi。

ppi: 每英寸多少像素点，放到显示器上说的是每英寸多少物理像素以及显示器设备的点距

dpi: 即每英寸多少点

### CSS 像素的真正含义

由于不同的物理设备的物理像素大小是不一样的，所以 css 认为浏览器应该对 css 中的像素进行调节，使得浏览器中 1css 像素的大小在不同的物理设备上看上去大小总是差不多，目的是为了保证阅读体验一致。为了达到这一点浏览器可以直接按照设备的物理像素大小进行换算，而 css 规范中使用**参考像素**来进行换算。

#### 例子

假设用 PC 浏览器打开一个页面，浏览器此时宽度为 800px，页面上同时有一个 400px 宽的块级元素容器，明显此时块容器应该占页面的一半。但是如果将页面放大为 200%，此时块容器横向占满了整个浏览器。但是我们并没有调整浏览器窗口大小，也没有改变 css 宽度，但是看上去却大了已一倍，这就是因为我们把 css 像素放大为了原来的两倍。

## 2. DP(device pixels)

### 定义

设备像素，显示屏是由一个个物理像素点组成的，通过控制每个像素点的颜色，使得屏幕显示出不同的图像，屏幕从出厂的时候起，其上面的像素点就固定不变了，单位`pt`。

`pt` 在 css 中属于真正的绝对单位。

### DP 与 CSS Pixel

获得设备像素比后，便可得知设备像素与 CSS 像素之间的比例，当这个比率为 1 时，使用 1 个设备像素显示 1 个 css 像素，当这个比率为 2:1 时，使用 4 个设备像素显示 1 个 css 像素：`DPR^2 = 设备像素/CSS像素`

### DIP(Device Independent Pixel)

设备独立像素，也称为逻辑像素，简称 dip。`css像素 = 设备独立像素 / 逻辑像素`

在移动端浏览器以及某些桌面浏览器中，`window`有一个`devicePixelRatio`属性：`devicePixelRatio=物理像素/独立像素`

CSS像素就可以看做设备的独立像素，所以通过`devicePixelRatio`，我们可以知道设备上一个 css 像素代表多少个物理像素。

## 3. DPR(device pixeld ratio)

设备像素比，描述的是未缩放状态下，物理像素和 css 像素的初始比例关系。指的是移动开发中一个 css 像素占用多少物理像素，如 2 代表 1 个 css 像素用 2×2 个设备像素来绘制，`1px = (dpr)^2 * 1dp`，可以理解为 1px 由多少个设备像素组成

