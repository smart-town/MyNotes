# 代理模式——控制对象访问

**控制和管理访问**

## 概念

> **代理模式**为另一个对象提供一个替身或者占位符以控制对这个对象的访问。

使用代理模式创建代表对象(representative)，让代表对象控制某对象的访问。被代理的对象可以是远程的对象、创建开销大的对象或者需要安全控制的对象。

代理之所以需要控制访问，是因为我们的客户不知道如何与远程对象沟通。从某个方面来看，远程代理控制访问，好帮我们处理网络上的细节。

## 使用

- `Proxy`和`RealSubject`都实现`Subject`接口，这允许任何客户都可以像处理`RealSubject`对象一样地处理`proxy`对象。
- `Proxy`对象持有`RealSubject`对象的引用，所以必要时它可以将请求转发给`Subject`
- `RealSubject`通常是真正做事的对象，`proxy`会控制对其的访问

## 实际应用

### 远程代理

如 RMI。远程代理可以作为另一个 JVM 上对象的本地代表，调用代理的方法，会被代理利用网络转发到远程执行，并且结果会通过网络返回给代理，再由代理将结果转回给客户。

### 准备虚拟代理

虚拟代理作为创建开销大的对象的代表。虚拟代理经常直到我们真正需要一个对象时才创建它。当对象在创建前和创建中时，由虚拟代理来扮演对象的替身，对象创建后，代理就会将请求直接委托给对象。

### 保护代理

### 动态代理

Java 中`java.lang.reflect`包中有自己的代理支持。利用这个包可以在运行时动态地创建一个代理类，实现一个或者多个接口，并将方法调用转发到你指定的类。因为实际的代理类是在运行时创建的，因此称为**动态代理**。

## 其他一些

缓存代理、智能引用代理、防火墙代理等等。

