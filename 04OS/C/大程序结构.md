# 大程序结构

**分而治之**

## 多个`.c`文件

在一个项目中将多个源代码文件加入，对于项目，编译器可以将一个项目中所有的源代码文件都编译后，链接起来。

从编译器来看：
- 一个`.c`是一个编译单元
- 编译器每次编译只处理一个编译单元（生成`.o`）【最后由链接器链接多个单元】

### gcc 使用
```shell
-o #指定生成的输出文件
-E #仅仅执行编译预处理
-S #将c处理为汇编代码
-wall #显示警告信息
-c #仅仅执行编译操作不进行连接操作
```
多个文件一起编译时可以：
`gcc test.c test2.c -o test`

也可以分开：
`gcc -c test.c` `gcc -c test2.c` `gcc -o test.o test2.o -o test`

## 头文件

将函数原型放到头文件`.h`中，需要这个函数的源代码中引用它。就能够让编译器在编译的时候知道函数的原型。【如果没有呢？编译器会自己推测。。】

## `#include`

- `#include`也是一个编译预处理指令
- 将那个文件的全部内容原封不动地插入到它所在的地方

### `""`和`<>`

- `""`要求编译器首先在当前目录（`.c`文件所在的目录）寻找这个文件，如果没有则到编译器指定的目录
- `<>`让编译器只到指定目录去找
- 编译器自己只到自己的标准库的头文件在哪里
- 环境变量和编译器命令行参数也可以指定寻找头文件的目录

### `include`误区

- `#include`不是用来引入库的
- 如`stdio.h`中只有`prinf`的原型，而`prinf`的代码则在另外的地方，某个`.lib`或`.a`中
- 现在 C 语言编译器默认引入所有标准库
- `#include<stdion.h>`只是为了让编译器只到`prinf`函数的原型，保证你调用时给出的参数值是正确的类型

### 头文件使用

- 使用和定义这个函数的地方都应该`#include`这个头文件
- 一般的做法就是任何`.c`都有对应的同名`.h`，将所有对外公开的函数原型和全局变量的声明都放进去

不对外公开的函数
- 函数前加上`static`就使得它成为智能在所在的编译单元中被使用的函数
- 在全局变量前面加上`static`就使得它成为只能在所在的编译单元中被使用的全局变量
