# 管线命令 pipe

bash 命令执行时会有输出数据出现，但是如果这些数据必须要经过一些处理才能变成我们想要的格式，应该如何设置。这就涉及到了管线命令。管线命令使用`|`符号。

假设需要知道`/etc`下面有多少个文件：`ls /etc`查看。但是`/etc`下文件太多，会一次将屏幕塞满，此时就可以使用`less`协助：`ls -al /etc | less`。此时，使用`ls`输出的内容，能够被`less`读取，并且利用`less`的功能，就能够翻动前后信息了。

`|`仅能够处理经由前一个指令传来的正确信息，也就是`standard output`信息，对于`standard error`并没有处理能力。在每个管线后面接收到的第一个数据一定是“指令”，而且这个指令必须能够接收`standard input`的数据才可以。这样的指令才可以是“管线命令”。

如`less`、`more`、`head`都是管线命令。

两点注意，需要注意。以上

## cut 和 grep

将一段数据分析后，取出需要的内容

### cut

将某一段信息的某一段“切”出来。处理时以“行”为单位。

`cut -d '分割字符' -f fileds` (用于有特定分割字符)`cut -d ' ' -f 1,5` 第一个第五个字符串（切割后）

`cut -c 字符区间` (用于排列整齐的讯息)，如`echo $PATH | cut -c 1-`剪切从第一个字符到最后

【注意】`cut`处理多空格相连的数据时可能会比较吃力。

### grep

`grep`是分析一行信息，而`cut`则是从一行信息中取出需要的。`grep`则是当某行中有需要信息时，就将该行拿出来。

`grep [-acinv] [--color=auto] '搜寻字符串' filename`

- `-a`: 将 binary 文件以 text 文件的方式搜寻数据
- `-c`: 计算找到“搜寻字符串”的次数
- `-i`: 忽略大小写的不同
- `-n`: 输出行号
- `-v`: 反向选择，即显示没有“搜寻字符串”的行
- `--color=auto`: 可以找到的关键字部分加上颜色的显示

## 排序指令 sort，wc，uniq

### sort

帮助排序，并且可以根据不同的数据形态排序。如文字和数字的顺序就不一样。此外，排序的字符与语系的编码有关，因此，如果你需要排序时，建议使用`LANG=C`来让语系统一。

`sort [-fbMnrtuk] [file or stdin]`

- `-f` 忽略大小写
- `-b` 忽略最前面的空白字部分
- `-M` 以月份名排序
- `-n` 以纯数字排序
- `-u` 即`uniq`,相同数据行只出现一行
- `-t` 分隔符号，默认`tab`分隔
- `-k` 以那个区间排序

如：`cat /etc/passwd | sort -t ':' -k 3`

### uniq

将重复的行仅仅列出一个显式`last | cut -d ' ' -f 1 | sort | uniq 

### wc

计算行、字、字符。分别对应参数`-l`、`-w`、`-m`

## 双向重导向

`>`会将数据流传给文件或者设备，因此除非读取设备或者文件才能得到信息，而`tee`会同时将数据流分送到文件和屏幕中。

