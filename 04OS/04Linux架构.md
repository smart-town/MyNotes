# Linux架构基础

![Linux架构图](./resources/linux-architecture.jpg)

最内层是硬件，最外层是用户最常用的应用。硬件是物质基础、而应用提供服务。但是在两者之间还要经过一番周折。

Linux 启动时，首先启动内核(kernal)，内核是一段计算机程序，这个程序直接管理硬件，包括CPU、内存空间、硬盘接口、网络接口等。所有的计算机操作通过计算机内核传递给硬件。

为了方便调用内核，Linux 将内核的功能接口制作成**系统调用**(system call)。系统调用看起来就像C语言的函数。你可以在程序中直接调用，Linux 有两百多个这样的调用。用户不需要了解内核的复杂结构就可以使用内核。系统调用是操作系统的最小功能单位。一个操作系统，以及基于操作系统的应用，都不可能实现超越系统调用的功能。一个系统调用就像汉字的一个笔画，任何一个汉字都要由基本的笔画构成。
v
在命令行中输入`man 2 syscalls`可以查看所有的系统调用。也可以通过`man 2 read`查看系统调用`read()`的说明。这两个命令中的 2 都表示我们要在 2 类（系统调用类）中查询。具体各个类可以通过`man man`来查看。

系统调用提供的功能非常基础，使用起来十分麻烦。一个简单的给变量分配内存空间的操作都要调用多个系统调用。Linux 定义一些**库函数**来将系统调用组合成某些常用的功能。上面的分配内存的操作就定义为了库函数。库函数就好像汉字的**偏旁部首**，由笔画组成，但是使用偏旁更容易组成字。

UNIX的一条哲学就是**让每个程序尽量独立做好一个小的功能**。而shell充当了这些小功能之间的胶水，让不同的程序能够以一个清晰的接口（文本流）协同工作，从而增强各个程序的功能。这也是鼓励多用shell的一个原因。曾经来说，一个终端是一个设备，用来显示并输出。但是现在图形化界面的流行，终端往往就是一个图形化的窗口。
