# 模块化

## 多个`.c`文件

- `main()`中代码太长了，适合分成几个文件
- 一个源代码文件太长了适合分成几个文件
- 两个独立的源代码文件不能编译形成可执行的程序

### 编译单元

- 一个 `.c` 文件是一个编译单元
- 编译器每次只能处理一个编译单元

## 头文件

将函数原型放到一个头文件`.h`中，在需要调用这个函数的源代码文件中`.c` `#include`这个头文件，就能够让编译器在编译的时候知道函数的原型。

一般的做法就是任何`.c`都有对应的同名的`.h`，将所有对外公开的函数的原型和全局变量的声明都放进去。

### `#include`

- `#include` 是一个编译器预处理指令，和宏一样，在编译前就处理了。
- 它将那个文件的全部内容原封不动地插入到它所在的地方。
- 所以也不是一定要在`.c`的最前面`#include`

### 两种形式

- `#include` 有两种形式来指出要插入的文件
    + `""`要求编译器首先在当前目录(`.c`文件所在目录)寻找这个文件，如果没有再去编译器指定的目录寻找
    + `<>`让编译器只在指定的目录中找
- 编译器知道自己的标准库头文件位置
- 环境变量和编译器命令行参数也可以指定寻找头文件的目录

### 常见误区说明

- `#include`不是用来引入库的
- `stdio.h`中只有`prinf`的原型，其代码在另外的地方，某个`.lib(windows)`或`.a(unix)`中
- 现在的 C 语言编译器会默认引入所有的标准库
- `#include<stdio.h>`只是为了让编译器知道`printf`函数的原型，保证你调用时给出的参数是正确的类型。

### 不对外公开的函数

- 在函数前面加上`static`使得其成为只能在所在的编译单元中被使用
- 在全局变量前加上`static`则使得他成为只能在所在的编译单元中被使用的全局变量