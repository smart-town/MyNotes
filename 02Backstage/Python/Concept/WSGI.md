# WSGI

`Web Server Gateway Interface.`
[原文](https://blog.csdn.net/on_1y/article/details/18803563)
## 认识

### 背景

Python Web 开发中，服务端程序可以认为由两部分构成：**服务器程序**和**应用程序**，前者负责客户端请求的接收、处理；后者负责具体的逻辑处理。为了方便应用程序的开发，将常用的功能封装起来，成为各种 web 开发框架，如`Django`、`Flask`等。不同的框架具有不同的开发方式，但是无论如何，开发出来的应用程序都要和服务器程序配合，才能为用户提供服务。这样，服务器就需要为不同的框架提供不同的支持。这样混乱的局面对于两者都是不好的，对于服务器来说，需要支持各种不同的框架。对于框架来说，只有支持它的服务器才能被开发出的应用使用。

此时标准化就变得格外重要。我们可以设立一个标准，只要服务器程序支持这个标准，框架也支持这个标准，那么它们就可以配合使用。一旦标准确定，双方各自实现。这样服务器可以支持更多支持标准的框架，框架也可以使用更多支持标准的服务器。

Python Web 开发中这个标准就是`The Web Server Gateway Interface`。

### 概念
`WSGI`是服务器程序和应用程序的一个约定，它规定了双方各自需要实现什么样的接口，提供什么样的功能，以便两者配合使用。

`WSGI`不能定的太复杂，否则对于已有的服务器来说，实现起来会很困难，不利于 WSGI 的普及，同时 WSGI 的规范也不能定的太多，如`cookie`处理就没有在 WSGI 中规定，这样是为了给框架最大的灵活性。

另一方面，WSGI 需要使得 middleware 易于实现。middleware 位于服务器程序与应用程序之间，对于服务器程序来说，它相当于应用程序，对于应用程序来说，它相当于服务器程序。对于用户请求的处理，可以变成多个 middleware 叠加在一起，每个 middleware 实现不同的功能。

## 内容概要

对于应用程序：
- 应用程序需要是一个可调用的对象
- 可调用对象接收两个参数
- 调用对象需要返回一个值，这个值是可迭代的

对于服务器程序：
- 服务器程序需要调用应用程序

## middleware