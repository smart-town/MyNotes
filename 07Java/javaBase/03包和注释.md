# 包和注释

## 包

Java 允许使用**包**将类组织起来。借助于包可以方便地组织自己的代码，并将自己的代码与别人提供的代码库分开管理。

使用包的另一个主要原因是确保类名的唯一性。

- 类的导入
- 静态导入`import static java.lang.System.*`，使用如`exit(0)`.
- 将类放入包中`package com.test.java;`

### 包作用域

`public`可以被任意类使用,`private`则只能被定义它们的类使用，而没有指定`public`或`private`则只能被同一个包中的所有方法访问。

### 类路径

类存储在文件系统的子目录中，类的路径也必须和包名相匹配。

另外，类路径也可以存储在 JAR 文档中。

为了使类能够共享，需要做到以下几点：
- 将类放到一个目录中，如`/home/user/classdir`
- 将 Jar 放到一个目录中，如`/home/user/archives`
- 设置类路径，类路径是所有包含类文件的路径的集合。

UNIX 中：`/homne/user/classdir:.:/home/archives/archive.jar`

从 JavaSE6 开始可以在 Jar 文件目录中指定通配符：`/home/usr/archives/'*'`或者`c:\archives\*`

javac 编译器总是在当前目录中查找文件，但是 Java 虚拟机仅在类路径中有`.`目录的时候才查找当前目录。如果没有设置类路径，那么也许不会有什么问题。但是如果设置了类路径可是忘记了包含`.`目录，那么程序能通过编译但是不能执行

假设虚拟机要搜寻`test.Employee`类文件，那么它首先查找存储在`jre/lib`和`/jre/lib/ext`目录下的归档文件中所存放的系统类文件。显然那里找不到相应的类文件，然后再查看类路径，按照类路径查找。

但是编译器比虚拟机复杂的多，如果引用了一个类，而没有指出这个类所在的包，那么编译器将首先查找包含这个类的包，并查询所有`import`指令，确定其中是否包含了被引用的类。例如假设源文件包含`import java.util.*`并且源代码引用了`Employee`类，编译器将试图查找`java.lang.Employee`（因为java.lang默认导入），`java.util.Employee`和当前包中的 Employee。对这个类路径下所有位置所列出的每一个类进行逐一查看，如果找到了一个以上的类，就会产生编译错误。因为类必须是唯一的。

编译器的任务并不止这些，他还会查看源文件是否比类文件新，如果是的话，那么源文件就会自动被重新编译。

#### 设置类路径

最好采用`-classpath`或`-cp`指定类路径。如`java -cp c:\classdir;.;c:\archives\* MyPro`

并不建议将`CLASSPATH`设置为全局，或者将所有文件存放在`jre/lib/ext`路径上

## 文档注释

JDK 包含一个很有用的工具叫做 javadoc，可以由源文件生成一个 HTML 文档，如果在源代码中以专用的定界符`/**`开始的注释，那么可以很容易生成一个具有专业水准的文档。这是一种很好的方式，因为这种方式可以将代码和注释保存在一个地方。如果将文档存入一个独立的文件中，就有可能随着时间的推移，出现代码和注释不一致的问题。然而如果在同一个文件中，修改源代码的同时，重新运行 javadoc 就可以轻而易举保持两者的一致性。

### 注释插入

javadoc 从以下几个特性中抽取信息：
- 包
- 公有类和接口
- 公有的和受保护的方法及构造器
- 公有和受保护的域

注释以`/**`开始，并以`*/`结束。

每个`/**...*/`文档注释在标记之后紧跟着**自由格式文本**。标记由`@`开始，如`@author`

自由格式文本的第一句应该是一个**概要性**句子，javadoc 实用程序自动将这些句子取出来形成概要页

在自由格式文本中，可以使用 HTML 修饰符。如`<em>`强调。如果键入等宽代码则使用`{@Code ...}`而不是`<code>`，这样一来就不用担心对代码中的`<`字符转义了。

如果文档中有到其他文件的链接，如图像文件。就应该将这些文件放到子目录`doc-files`中，javadoc 会自动拷贝

### 类注释

类注释必须放在`import`语句之后，类定义之前。

### 方法注释

每个方法注释必须放在所描述的方法之前。除了通用标记之外，还可以使用：
`@param`、`@return`、`@throws`

### 域注释

只需要对公有域（通常指的是静态常量）建立文档

### 通用注释

- @author
- @version
- @since 始于条目
- @deprecated 文本，不再使用的注释
- @see 引用，增加一个超级链接
- {@link package.class#method}

### 包注释

可以将类、方法、变量的注释放在同一个源文件中，但是如果要产生包注释，就要在每一个包目录中添加一个单独的文件
- 提供一个 package.html 命名的 HTML 文件，在`<body>`中的所有文本都被抽取出来
- 提供一个`package-info.java`命名的文件，这个文件必须包含一个初始以`/** */`节点的注释，他不应该包含更多的代码或者注释

## 注释抽取

假设 HTML 文件将被存放到 docDectory 中：
1. 切换到包含想要生成文档的源文件目录。如果有嵌套的包要生成文档，如`com.horstmann.corejava`，就必须切换到包含`com`子目录的目录。
2. 如果是一个包，则运行`javadoc -d docDirectory nameOfPackage`
3. 如果文件在默认包中，则运行：`javadoc -d docDirectory *.java`

