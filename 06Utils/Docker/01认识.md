# Docker 认识

[原文](http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html)

## 由来

### **环境配置难题**，

软件开发最为麻烦的事情之一就是环境配置，用户计算机的环境都不相同，不能保证软件一定在另一台机器上正常运行。必须要保证：操作系统的设置、各种库和组件的安装，只有它们都正确软件才能正确运行。如果某些老旧模块与当前环境不兼容就很麻烦了。由此带来——软件可以带着环境安装，即安装时将环境复制过来
### **虚拟机**，

virtual machine 就是带环境安装的一种解决方案。虽然可以通过虚拟机还原软件的原始环境，但是有几个缺点
- 资源占用多，虚拟机独占一部分内存和硬盘，它运行时其他程序就不能使用这些资源了，即使虚拟机中真正运行的只有 1MB 虚拟机仍然需要几百 MB 才能运行
- 冗余步骤多，虚拟机是完整的操作系统，系统级别的步骤往往无法跳过
- 启动慢

### **Linux**容器

由于虚拟机的缺点，Linux 发展出另外一种虚拟化技术：Linux 容器(Linux Container,LXC)

Linux 容器不是模拟一个完整的操作系统，而是对进程进行隔离。或者说，在正常的进程外套了一层保护层，对于容器里面的进程来说，他接触到的各种资源都是虚拟的，从而实现与底层系统的隔离。由于容器是进程级别的，相比虚拟机有很多优势

- 启动快：容器中的进程直接就是底层系统的一个进程，而不是虚拟机内部的进程。
- 资源占用少：容器只占用需要的资源，不占用没用到的资源，虚拟机由于是完整的操作系统不可避免要占用所有资源。另外容器可以共享资源，虚拟机都是独享资源。
- 体积小： 容器只要包含用到的组件即可，而虚拟机是整个系统的打包，所以容器文件比虚拟机文件小很多。

总之容器有点像轻量级的虚拟机，能够提供虚拟化的环境，但是成本开销小很多。

## Docker 是什么

Docker 属于 Linux 容器的一种封装，提供简单易用的容器使用接口。它是目前最流行的 Linux 容器解决方案。

Docker 将应用程序与该程序的依赖，打包在一个文件里，运行这个文件就会生成一个虚拟容器，程序在这个虚拟容器中运行，就好像是在真实的物理机上运行。有了 Docker 就再也无需担心环境问题。

总体来说，Docker 相当简单，用户可以方便创建和使用容器，将自己的应用放入容器。容器还可以进行版本管理、复制、分享、修改等。

## 用途

- 提供一次性的环境。如，本地测试他人软件、持续集成的时候提供单元测试和构建的环境
- 提供弹性的云服务，因为 Docker 容器可以随开随关，很适合动态扩容
- 组建微服务架构，通过多个容器，一台机器可以跑多个服务，因此在本机就可以模拟出微服务架构