# 配置服务

## 管理配置(和复杂性)

四个原则：
- **分离**
- **抽象** 将访问配置数据的功能抽象到一个服务接口中。应用程序使用基于 REST 的 JSON 服务来检索配置数据，而不是编写直接访问服务存储库的代码。
- **集中** 因为基于云的应用程序可能会有数百个服务，所以最小化用于保存配置信息的不同存储库的数量至关重要，将应用程序配置集中在尽可能少的存储库中。
- **稳定** 因为应用程序的配置信息和部署的服务完全隔离并集中存放，所以不管采取何种方案实现，至关重要的一点就是保证其高可用和冗余。

## 配置管理架构

装配->引导->发现->监控

1. 当一个微服务实例出现时，它将调用一个服务端点来读取其所在环境的特定配置信息。配置管理的连接信息将在为服务启动时被传递给微服务
2. 实际的配置信息驻留在存储库中，基于配置存储库的实现，可以选择使用不同的实现来保存配置数据。配置存储库的实现选择可以包括源代码控制下的文件，关系数据库或者键值数据库。
3. 应用程序的配置管理和应用程序的部署方式无关，配置管理的更改通过构建和部署管道来处理。其中配置的更改可以通过版本信息进行标记，并通过不同的环境进行部署
4. 进行配置管理更改时，必须通知使用该应用程序配置数据的服务，并刷新应用程序数据的副本。

## 实施选择

Etcd、Eureka、Consul、ZooKeeper、SpringCloudConfig

