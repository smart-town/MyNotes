## 文件目录

对于每一个 Linux 学习者而言，了解 Linux 文件系统的目录结构是学好 Linux 至关重要的一步。

由于 linux 是开放源代码，各大公司和团体根据 linux 的核心做各自的工作，编程。这就造成了在根下的目录的不同，使得一个人不能使用他人的 linux 系统的 pc。因为你根本不知道一些基本的配置、文件、设备都在哪里。这就是 FHS(FileSystem Hierarchy Standard) 机构诞生的原因。该机构是 linux 爱好者自发组成的一个团体，主要对 linux 做一些基本的要求，不至于操作者换一台主机就变成 linux 的文盲。

根据 FHS 的官方文件指出，他们的主要目的是希望让使用者可以了解到已安装软件通常放置在哪个目录下，所以他们希望独立的软件开发商、操作系统制造者、以及想要维护系统的用户，都能遵循 FHS 的标准，也就是说，FHS 的重点在于规范每个特定的目录下应该放置什么样子的数据。这样做的好处非常多，因为 linux 操作系统就能够在既有的面貌下（目录架构不变）发展出开发者想要的独特风格。

事实上，FHS 是根据过去的经验一直在改版的。FHS 根据文件系统的使用频繁与否是否允许使用者随意变更，而将目录定义为四种交互作用的形态：

 -|可分享的|不可分享的
-----|-----|-----
不变的|/usr 软件放置处 /opt 第三方协力软件|/etc 配置文件 /boot 开机与核心档
可变动的|/var/mail /var/spool/news|/var/run /var/lock

四种类型：

- 可分享的：可以分享给其他系统挂载使用的目录，所以包括执行文件和用户的邮件等数据，是能够分享给网络上其他主机挂载用的目录
- 不可分享的： 自己机器上运作的装置文件或者是与程序有关的 socket 文件等，。如主机服务配置文件等
- 不变的： 有些数据是不会经常变动的，跟随者 distribution 而不变动
- 可变动的： 经常改变的数据，例如登陆文件。

事实上，FHS 针对目录树架构仅仅定义出三层目录底下应该放置什么数据： 

- `/`: 根目录，与开机系统有关
- `/usr`: 与软件安装、执行有关
- `/var`: 与系统运作过程有关

## 根目录(/)

根目录是整个系统中最重要的目录，因为不但所有的目录都是根目录衍生出来的，同时根目录也与开机/还原/系统修复等动作有关。由于系统开机时需要特定的开机软件、核心文件、开机所需程序、函式库等，若系统出现错误时，根目录也必须要包含能够修复文件系统的的程序才行。因为根目录如此重要，所以 FHS 的要求希望根目录不要放在非常大的分区，因为越大的分区会放入越多的数据，如此一来根目录所在的分区就会有较多错误发生的机会。

因此 FHS 标准建议，根目录所在的分区越小越好，且应用程序所安装的软件最好不要与根目录放在同一个分区中。如此不但能性能较佳，根目录所在的文件系统也比较不容易发生问题。说白了和 Windows 的 c盘 一样。

FHS 认为 `/` 根目录下应该包含：

*计算机启动，/boot /lib.计算机之外的硬件/dev /meida /mnt。指令/bin /sbin。用户/home /root 程序/srv /etc /tmp*

*对于/usr. unix software resource即Unix下的软件集合处。对于软件，其指令？ bin. sbin 依赖？lib include 具体：/share /local /src*

目录 | 应当放置内容
----- | ------
/bin | 系统中有很多放置执行档的目录，但是/bin比较特殊，因为/bin放置的是单人维护模式下还能被操作的指令。在/bin底下的指令可以被root和一般账号所使用。主要有cat, chmod, chown, date, mv, mkdir, cp, bash等常用指令
/boot | 主要放置开机时用到的档案，包括 linux 核心档案以及开机选单与开机所需要设定档等。Linux kernel 常用的档案名为 vmlinuz。如果使用的是 grub 开机管理程式，则还会存在 /boot/grub 目录
/dev | Linux 系统中任何装置与周边设备都是以档案的形态存在于这个目录当中的，只要通过存取这个目录下的档案，就等于存取某个装置。比较重要的档案有：/dev/null，/dev/zero，/dev/tty, /dev/lp*, /dev/hd*, dev/sd* 等
/etc | 系统主要的设定档几乎都放在这个目录内，例如人员账号和密码、各种服务的起始档。一般来说，这个目录下的各档案属性是可以让一般使用者查阅的，但是只有 root 有权力修改。重要的目录如 /etc/init.d/ 所有服务的预设启动 script 都是放在这里的，例如要启动或者关闭 script 都是放在这里的，如 /etc/init.d/iptables start
/home | 这是系统预设的使用者的家目录，在新增一个一般使用者的账号的时候，预设的使用者家目录都会规范到这里来。比较重要的是，家目录有两种代号：~:代表当前使用者的家目录，而~guest则代表用户名为 guest 的家目录
/lib | 系统的函式库非常的多，而 /lib 放置的是再开机时会用到的函式库，以及在 /bin 或者 /sbin 底下的指令会呼叫的函式库而已。什么是函式库呢？你可以将他想象为外挂，某些指令必须要有这些外挂才能顺利完成程式的执行。尤其重要的是/lib/modules 这个目录，因为该目录会放置核心相关的模组。
/media | 媒体的英文，顾名思义，该目录下放置的就是可移除的装置。包括软碟、光碟等装置都暂时挂载于此。常见的挂载名有：/media/floppy /meia/cdrom 等
/mnt | 如果你想要暂时挂载某些额外的装置，一般建议放在这个目录。在早期该目录与media目录作用相同。只是有了/media目录之后，该目录就用来暂时挂载使用了。
/opt | 这是给第三方协力软件放置的目录，什么是第三方协力软件呢？举例来说，KDE这个桌面系统是一个独立的集合，不过它可以安装到linux安装目录中。
/root | 系统管理员的家目录 root。之所以放在这里是因为进入单人维护模式而仅挂载根目录时，该目录就能拥有 root 的家目录。所以我们会希望 root 的家目录能够与根目录放在同一个分区中。
/sbin | Linux 有非常多的指令是用来设定系统环境的。这些指令只有 root 才能够利用来设定系统。其他使用者最多只能是用来查询而已。放在 /sbin 底下的为开机过程中所需要的，里面包括了开机、修复、还原系统所需要的指令。至于某些伺服器软体程式，一般放置到/usr/sbin 中。至于本机自行安装的软件所产生的系统执行档(system binary)则放置到了/usr/local/sbin/ 中。
/srv | srv 可以视为 service 的缩写。是一些网络服务器启动之后，这些服务所需要取用的资料目录。常见的服务例如 www，ftp 等等。举例来说，www服务器需要的网页资料就可以放在 /src/www 里面
/tmp | 这是让一般使用者或者正在执行的程序暂时放置档案的地方。这个目录是任何人都能够存取的，所以需要定期清理以下。当然重要的资料是不能放在这里IDE。因为 FHS 甚至建议在开机时应该将 /tmp 下面的资料全部清除。

事实上 FHS 针对根目录所定义的标准就仅限于上表。不过仍然有些目录需要了解一些。

目录 | 应放置文件内容
-----|------
/lost+found|这个目录是使用标准ext2/ext3档案系统格式才会产生的一个目录。目的在于当档案系统发生错误的时候，将一些遗失的片段放置到这个目录下。
/proc|这个目录本身是一个虚拟文件系统(virtual filesystem)。它放置的资料都是在内存当中。例如系统核心、进程资讯、周边装置的状态以及网络状态等等。因为这个目录底下的资料都是在内存中，所以本身并不占用硬盘空间。
/sys|这个目录其实和 /proc 类似，也是一个虚拟的档案系统。主要也是记录与核心相关的资讯。包括目前已经载入的核心模组和核心侦测到的硬件装置资讯等。

除了这些目录的内容之外，还要注意的是，因为根目录和开机有关。开机过程中仅有根目录会被挂载，其他分区则是在开机完成后才会持续进行挂载的。就是因为如此，因此根目录下与开机过程有关的目录，就不能与根目录放到不同的分区中去。

哪些目录不能与根目录分开呢？

- /etc: 配置文件
- /bin: 执行重要档
- /dev: 所需要的装置文件
- /lib: 执行档所需要的函式库与核心所需要的模块
- /sbin: 重要的系统执行文件

## /usr 的意义和内容

根据 FHS 的基本定义，/usr 中放置的数据属于可分享的与不可变动的，如果你知道如果透过网络进行分区的挂载，那么`/usr`确实可以分享给局域网中的其他主机来使用。

`/usr`不是 user 的缩写。其实 usr 是 `Unix Software Resource` 的缩写。也就是 Unix 操作系统软件资源所放置的目录。而不是用户自己的数据。这点需要注意。FHS建议所有的软件开发者，应该将他们的数据合理地分别放置到这个目录下的次目录中，而不要自行建立该软件自己独立的目录。

因为是所有系统默认的软件(distribution发布者提供的软件)都会放置到`/usr`下面。因此这个目录有点类似 Windows 系统下的`C:\Windows\ + C:\Program files`这两个目录的综合体。系统刚装完时，这个目录会占据最多的磁盘容量。一般来说，`/usr`的次目录建议有以下这些:

目录 | 应该放置的文件内容
-----|-----
/usr/X11R6/ | 为 X Window System 重要数据所放置的目录。
/usr/bin | 绝大部分的用户可以使用的指令都放在这里。注意它与`/bin`的不同。（是否与开机过程有关）
/usr/include/| C++ 等程序语言的 header 和 include 放置处。当我们以`tarball`方式(*.tar.gz方式安装软件)安装某些数据时，会使用到里面的很多包含档
/usr/lib | 包含各个应用软件的函式库、目标文件，以及不被一般使用者惯用的执行档或者脚本。某些软件会提供一些特殊的指令以进行服务器的设定，这些指令也不会经常被管理员操作，那就会被放到这个目录下。
/usr/local | 系统管理员在本机自行安装自己下载的软件时，建议安装到此目录。这样会比较便于管理。举例来说，你的 distribution 提供的软件比较旧，你想安装新的但是又不想移除旧版，此时可以将新版软件安装于/usr/local下。该目录下也有bin,etc,include,lib的次目录
/usr/sbin | 非系统正常运作所需要的系统指令，最常见的就是某些网络服务器软件的服务指令
/usr/share | 放置共享文件的地方，在这个目录下放置的几乎是不分硬件架构均可读取的数据，因为几乎都是文本文件。在此目录下还有 /usr/share/man 联机帮助文件；/usr/share/doc 软件杂项的说明文件
/usr/src/ | 一般原始码建议放在这里。至于核心代码则建议放置/usr/src/linux下

## /var 的意义和内容

如果 /usr 是安装时会占用较大硬盘内容的目录，那么 /var 就是在系统运行后才会渐渐占用硬盘容量的目录。因为 /var 目录主要针对的常态性变动的文件，包括缓存、登录档、以及某些软件运作所产生的文件。包括程序文件，或者例如 MySQL 数据库的文件等。常见的次目录：

目录 | 应放置内容
------ | -------
/var/cache | 应用程序本身运作过程中会产生的一些暂存档
/var/lib | 程序本身执行过程中，需要使用到的数据文件放置的目录。在此目录下各自的软件应该要有各自的目录。举例来说，MySQL 的数据库放置到 /var/lib/mysql 而 rpm 则放置到 /var/lib/rpm 中
/var/lock | 某些装置或者文件资源一次只能被一个应用程序所使用，如果同时有两个程序使用该装置时就可能产生一些错误的状况，因此就要将该装置上锁，以确保该装置只会给单一软件使用。
/var/log | 非常重要，这是登陆文件放置的目录。里面比较重要的文件如 /var/log/messages /var/log/wtmp 记录登入者信息等
/var/mail | 放置个人电子邮件信箱的目录，不过这个目录也经常被放到 /var/spool/mail 通常这两个目录互为链接文件
/var/run | 某些程序或者服务启动之后，会将他们的 PID 放置在这个目录下。
/var/spool |  这个目录通常放置一些队列数据，所谓队列就是排队等待其他程序使用的数据。这些数据被使用后通常都会被删除。举例来说，系统收到新信后会放置到 /var/spool/mail 中，但是使用者收下该信件后原则上就会被删除

## 目录树

在 Linux 底下，所有的文件与目录都是从根目录开始的，那是所有目录与文件的源头。然后再一个一个分支下来。因此我们也称这种目录配置方式为：目录树。这个目录树的主要特点有：

- 目录树的起始点为根目录 /
- 每个目录不止能使用本地端的 partition 的文件系统，也可以使用网络上的 filesystem。举例来说，可以利用 Network File System 服务器挂载某特定目录等
- 每一个文件在此目录树中的文件名都是独一无二的。

## 绝对路径与相对路径

绝对路径：由根目录 / 开始写起的文件名或者目录名称

相对路径：相对于目前路径的文件名写法。只要开头不是 / 就属于相对路径的写法。

实例：./run.sh 这样的指令？由于指令的执行需要变量的支持，如果你的执行文件放在本目录，并且本目录并非正规的执行文件目录，(/bin /usr/bin等为正规)，此时要执行指令就要严格指定该文档。./代表本目录的意思，所以./run.sh代表执行本目录下名为run.sh的文件



