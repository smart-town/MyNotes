# 视口

在 CSS 的标准文档中，视口 viewport 被称为初始包含块，这个初始包含块是所有CSS宽度百分比推算的根源。它给CSS布局限制了一个最大宽度。在桌面上，视口的宽度和浏览器的窗口是一致的，而在移动端，视口被分为布局视口、视觉视口、理想视口。

## 布局视口

移动端设备的问题是，如果使视口的宽度和浏览器窗口宽度一样会导致很丑陋的结果。移动端浏览器通常的宽度是240到640像素，且大多数设计给桌面的宽度至少是 800px。因此网站内容在手机上看起来会非常窄。

在手机上，视口与移动浏览器屏幕宽度不再相关联，而是完全独立的。我们称他为是布局视口。即CSS布局会根据它来计算，并被他约束。

为了容纳为桌面浏览器设计的网站，移动设备默认的布局视口宽度远大于屏幕的宽度。设置为 980px 或者 1024px（也可能是其他值，这个由设备自己决定）但是带来的后果就是浏览器会出现横向滚动条，因为浏览器可视区域的宽度是比这个默认的viewport的宽度要笑的。

`document.documentElement.clientWidth/Height`返回的是布局视口的尺寸

## 视觉视口

虽然独立布局视口的创造很大程度上帮助了桌面网站到手机上的转移但是我们不能完全无视移动端屏幕的尺寸。一些CSS声明与用户见到的东西有关。而与css包含的初始块无关。并且，有时候知道用户看到了网站哪些部分对web开发者有帮助。

视觉视口是用户正在看的网站的区域，对于javascript属性是：`window.innerWidth/Height`。

缩放会影响视觉视口的大小，当缩放程度是100%时，视觉视口和设备屏幕一样宽。放大使视觉视口变得更小，因为屏幕上显示的css像素更小了，而缩小会让视觉视口更大因为屏幕上的css像素更多了。因此缩放程度和视觉视口的大小是逆相关的。放的越大，视觉视口越小。

以iphone5为例，浏览器布局视口默认为宽度 1024px，屏幕宽度只有640像素，DPR为2，所以CSS像素为320px。

# 移动屏幕开发的三个要素

实际上并没有三要素这个说法，这里仅是作者的总结归纳。屏幕三要素包括：屏幕尺寸、屏幕分辨率、屏幕像素密度

## 屏幕尺寸

常常所说的5.5英寸大屏幕手机，实际上屏幕尺寸指的是屏幕的对角线长度。常见的屏幕尺寸有3.5、4等

对于英寸没有概念，可以转换为厘米：`1英寸=2.54厘米`

## 屏幕分辨率

屏幕分辨率指的是屏幕的像素点数，一般以纵向像素×横向像素来表示分辨率。常用分辨率有如800×600、1024×768、1280×720等，单位是 px.

【HD和4K】现在移动设备、智能电视宣传最多可能就是HD、4K，这两者都是用来描述设备分辨率的标准。两者之间的区别？HD没有固定的标准，基本上只要宽度为720px都算是HD。full HD(全高清):1920×1080分辨率。4K也叫QHD或UHD，最小分辨率是3840×2160主要是高端电视的分辨率。

## DPI和PPI

DPI(Dots Per Inch)是印刷行业用来度量空间点密度的，这个值是打印机每英寸可以喷的墨汁点数。计算机显示设备从打印机中借鉴了DPI的概念，由于计算机显示设备中的原子单位不是墨汁点而是像素，所以就创建了PPI(Pixels Per Inch)，这个值是屏幕每英寸的像素数量，即像素密度。由于各种原因，目前PPI和DPI都会用在计算机显示设备的参数描述中，不过两者的意思都是一样的，都表示的是屏幕像素密度。

DPI/PPI = 对角线分辨率/屏幕尺寸

# 像素

像素几乎在Web开发中天天用到，但是其到底是什么意思，移动端和桌面端的像素有区别吗，缩放对像素有影响吗。

## 定义

像素又称画素，是图像显示的基本单位。`pixel`，`pix`是英文`picture`的 常用缩写，加上`element`元素，就得到了`pixel`。故像素表示的是图像元素之意。

像素是网页布局的基础，一个像素就是计算机能够显示一种特定颜色的最小区域，当设备尺寸相同但是像素变得更密集时，屏幕上能显示的画面的过渡更加细致。

## 分类

实际上像素分为两种：设备像素和CSS像素

1. 设备像素，设备屏幕的物理像素，任何设备的物理像素的数量都是固定的
2. CSS像素，又称为逻辑像素，是为web开发者创造的，在js和css中使用的一个抽象层。

每一个CSS声明和几乎所有的js属性都使用的是css像素，所以实际上从来用不上设备像素，唯一例外是`screen.width/height`。

## 缩放

在桌面端，css的每个像素往往都对应的是电脑屏幕的1个物理像素。而在手机端，由于屏幕尺寸的限制，缩放是经常性的操作。不论我们进行缩小还是放大操作，元素设置的css像素大小是不变的，而一个css像素对应多少设备像素是根据缩放比例来决定的。

## DPR

设备像素比DPR(devicePixelRatio)是默认缩放为100%时，设备像素和CSS像素的比值。

在早先的移动设备中并没有DPR这个概念，但是随着技术的发展，移动设备的屏幕像素密度越来越高，从iphone4开始苹果推出视网膜屏幕，之所以叫做视网膜屏幕是因为屏幕的PPI太高，人的视网膜无法分辨出屏幕上的像素点，这样分辨率提高了一倍但是屏幕尺寸却没有变化，这意味着同样大小的屏幕，像素多了一倍。，于是DPR=2

实际上，此时的CSS像素对应着**理想视口**